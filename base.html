<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Get the Value of Text Input Field in JavaScript</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <form>
        <input type="text" placeholder="Date" id="Date">
        <input type="text" placeholder="Stock 1" id="s1">
        <input type="text" placeholder="Stock 2" id="s2">

        <button type="button" onclick="getInputValue();">Submit</button>
    </form>

    <script>
        function getInputValue() {
            // Selecting the input element and get its value 
            var inputDate = document.getElementById("Date").value;
            var inputS1 = document.getElementById("s1").value;
            var inputS2 = document.getElementById("s2").value;

            const dates = [];
            const closes1 = [];
            const closes2 = [];

            let url1 = "http://api.marketstack.com/v1/eod?access_key=469ed3642bddff1dee77e5b1332ce3b7&symbols=";
            let url2 = "&date_from=";
            let urlTotal = url1.concat(inputS1).concat(url2).concat(inputDate);

            async function callAPI1() {
                let response = await fetch(urlTotal);
                let text = await response.json();

                let dataArray = text.data
                for (let i = 0; i < dataArray.length; i++) {
                    closes1.push(dataArray[i].close)
                    dates.push(dataArray[i].date)
                    console.log(closes1[i])
                    console.log(dates[i])

                }
            }
            callAPI1()

            let urlTotal2 = url1.concat(inputS2).concat(url2).concat(inputDate);
            async function callAPI2() {
                let response = await fetch(urlTotal2);
                let text = await response.json();

                let dataArray = text.data
                for (let i = 0; i < dataArray.length; i++) {
                    closes2.push(dataArray[i].close)
                    console.log(closes2[i])

                }

            }
            callAPI2()
        

        
        }
    </script>

    <div>
        <canvas id="myChart"></canvas>
    </div>
    <script>
        console.log("Past canvas")
        let myChart = document.getElementById('myChart').getContext("2d");
        let lineChart = new Chart(myChart, {
            type: "line",
            data: {
                labels: ["One", "Two", "Three"],
                dataset: {
                    label: "Closing Price",
                    data: [5, 10, 15],
                    options : {}
                }
            }
        })

            /*
            let myChart = document.getElementById("myChart").getContext("2d");
            
                        let lineChart = new Chart(myChart, {
                            type: "line",
                            data: {
                                labels: [],
                                datasets: {
                                    label: "Closing Price ($)",
                                    data: [closes1]
                                }
                            }*/



        


    </script>
</body>

</html>